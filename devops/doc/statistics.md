# 项目数据模型管理系统 - 数据变更统计

数据变更统计设计为mysql数据库扩展数据统计功能。 如db库.table表每天有多少次数据插入、更新、删除操作？ 如db库.table表.field指定字段有多少次有效变更操作？

## 解决什么问题

有此情况导致脚本一直重复刷新库表的数据，或错误的sql语句导致全表更新等。

例如：某表有一万条记录， 有个不合格脚本每5分钟刷一次表中数据，且导致更新时间全部变更。  
这对开发是无感知的，数据没多没少也没变，只是在空刷mysql性能（mysql每条更新都是重写数据-参考mysql MMVC）。

mysql数据本身没有提供统计功能，通过消费其binlog为mysql提供数据插入、更新、删除操作的统计数据。

## 目标

统计每天库，表，字段的影响条数。 通过区间范围和实现业务情况相结合，找出异常。 导致数据异常的情况有很多：如接口攻击，恶意sql, 劣质定时任务等。

## 规则定义

规则有两种：

- 库+表
- 库+表+字段

库+表可统计每天此表的插入条数、更新条数、删除条数 库+表+字段可以每天此字段的有效更新条数。（即字段内容有实质改变）

## 图片演示

![数据变更统计图](/devops/docops/doc/images/data_statistics.jpg)

